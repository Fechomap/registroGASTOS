[build]
builder = "railpack"
buildCommand = "pnpm install --frozen-lockfile && pnpm run db:generate && pnpm --filter @financial-bot/database run db:migrate:deploy && pnpm run build"
watchPaths = ["apps/telegram-bot/**", "packages/**"]

[railpack]
nodeVersion = "20"
packageManager = "pnpm"

[deploy]
startCommand = "node apps/telegram-bot/dist/index.js"
restartPolicyType = "always"

[env]
NODE_ENV = "production"
PORT = "3000"
LOG_LEVEL = "info"